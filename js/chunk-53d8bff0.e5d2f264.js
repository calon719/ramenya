(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53d8bff0"],{"107c":function(e,t,c){var n=c("d039"),o=c("da84"),a=o.RegExp;e.exports=n((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"14c3":function(e,t,c){var n=c("da84"),o=c("c65b"),a=c("825a"),l=c("1626"),r=c("c6b6"),s=c("9263"),i=n.TypeError;e.exports=function(e,t){var c=e.exec;if(l(c)){var n=o(c,e,t);return null!==n&&a(n),n}if("RegExp"===r(e))return o(s,e,t);throw i("RegExp#exec called on incompatible receiver")}},"25f0":function(e,t,c){"use strict";var n=c("e330"),o=c("5e77").PROPER,a=c("6eeb"),l=c("825a"),r=c("3a9b"),s=c("577e"),i=c("d039"),d=c("ad6d"),u="toString",b=RegExp.prototype,m=b[u],p=n(d),f=i((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),g=o&&m.name!=u;(f||g)&&a(RegExp.prototype,u,(function(){var e=l(this),t=s(e.source),c=e.flags,n=s(void 0===c&&r(b,e)&&!("flags"in b)?p(e):c);return"/"+t+"/"+n}),{unsafe:!0})},"466d":function(e,t,c){"use strict";var n=c("c65b"),o=c("d784"),a=c("825a"),l=c("50c4"),r=c("577e"),s=c("1d80"),i=c("dc4a"),d=c("8aa5"),u=c("14c3");o("match",(function(e,t,c){return[function(t){var c=s(this),o=void 0==t?void 0:i(t,e);return o?n(o,t,c):new RegExp(t)[e](r(c))},function(e){var n=a(this),o=r(e),s=c(t,n,o);if(s.done)return s.value;if(!n.global)return u(n,o);var i=n.unicode;n.lastIndex=0;var b,m=[],p=0;while(null!==(b=u(n,o))){var f=r(b[0]);m[p]=f,""===f&&(n.lastIndex=d(o,l(n.lastIndex),i)),p++}return 0===p?null:m}]}))},"76db":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={class:"cart"},a=Object(n["createElementVNode"])("header",{class:"page-banner"},[Object(n["createElementVNode"])("h2",{class:"page-banner-title fs-1"},"購物清單")],-1),l={class:"main-footer-bottom"},r={class:"container bg-white mb-5 py-5 px-md-4"},s=Object(n["createElementVNode"])("div",{class:"row justify-content-center"},[Object(n["createElementVNode"])("div",{class:"col-12 col-md-8 col-lg-7"},[Object(n["createElementVNode"])("ul",{class:"multi-steps"},[Object(n["createElementVNode"])("li",{class:"active"},"確認品項"),Object(n["createElementVNode"])("li",null,"填寫資料"),Object(n["createElementVNode"])("li",null,"確認資料"),Object(n["createElementVNode"])("li",null,"完成訂單")])])],-1),i={key:0,class:"p-5 text-center"},d=Object(n["createElementVNode"])("p",{class:"fs-4 opacity-50 mt-5"},[Object(n["createElementVNode"])("i",{class:"bi bi-cart-x fs-1"}),Object(n["createElementVNode"])("br"),Object(n["createTextVNode"])(" 購物車目前沒任何商品喔！ ")],-1),u=Object(n["createElementVNode"])("i",{class:"bi bi-arrow-right"},null,-1),b=Object(n["createTextVNode"])(" 去逛逛 "),m={key:1},p={class:"text-end mb-3 me-md-3 pe-1"},f={class:"px-3 px-md-5"},g=Object(n["createStaticVNode"])('<ul class="row border-bottom border-top list-unstyled py-2"><li class="col-12 col-md-5"><h3 class="m-0 py-2 fs-6 fw-bold text-center">商品</h3></li><li class="col-3 d-none d-md-block"><h3 class="m-0 py-2 fs-6 fw-bold text-center">數量</h3></li><li class="col-3 d-none d-md-block"><h3 class="m-0 py-2 fs-6 fw-bold text-end">小計</h3></li></ul>',1),j={class:"col-5 col-md-2"},O={class:"ratio ratio-4x3 overflow-hidden"},x=["src","alt"],v={class:"col-5 col-md-9"},h={class:"row gy-3 list-unstyled"},E={class:"col-12 col-md-4 d-flex align-items-center justify-content-center justify-content-md-start"},N={class:"m-0 fs-5"},y={class:"col-12 col-md-5"},V={key:0,class:"d-flex justify-content-center"},k=Object(n["createElementVNode"])("div",{class:"spinner-border"},null,-1),C=[k],w={key:1,class:"input-group"},R=["disabled","onClick"],B=Object(n["createElementVNode"])("span",{class:"material-icons-outlined"}," remove_circle ",-1),D=[B],I=["onUpdate:modelValue","onChange"],S=["onClick"],L=Object(n["createElementVNode"])("span",{class:"material-icons-outlined"}," add_circle ",-1),T=[L],_={class:"col-12 col-md-3 d-flex align-items-center justify-content-center justify-content-md-end"},$={class:"col-2 col-sm-1 text-center"},q={key:0,class:"spinner-border spinner-border-sm"},A=["onClick"],P={class:"cart-total row flex-column align-items-end list-unstyled mx-3 mx-md-4 mb-5"},U={class:"col-12 col-md-6 col-lg-4"},M={class:"input-group mb-2"},F=["disabled"],K={key:0,class:"spinner-border spinner-border-sm",role:"status"},z={key:1},J={class:"col-12 col-md-6 col-lg-4 d-flex justify-content-between"},Y=Object(n["createElementVNode"])("p",null,"小計",-1),G={class:"col-12 col-md-6 col-lg-4 d-flex justify-content-between"},H=Object(n["createElementVNode"])("p",null,"運費",-1),Q={class:"col-12 col-md-6 col-lg-4 border-bottom d-flex justify-content-between mb-2"},W=Object(n["createElementVNode"])("p",null,"折扣",-1),X={class:"col-12 col-md-6 col-lg-4 d-flex justify-content-between"},Z=Object(n["createElementVNode"])("h4",{class:"fw-bold fs-6 mb-0"},"應付金額",-1),ee={class:"footer-btn-group row mb-5"},te={class:"col-12"},ce={class:"text-danger text-end mb-1"},ne=Object(n["createElementVNode"])("i",{class:"bi bi-exclamation-circle me-1"},null,-1),oe=Object(n["createTextVNode"])("總金額未滿 300 元不得外送 "),ae=[ne,oe],le={class:"col-5 col-md-3 col-lg-2 ms-md-4 me-auto"},re=Object(n["createElementVNode"])("i",{class:"bi bi-arrow-left"},null,-1),se=Object(n["createTextVNode"])(" 還想逛逛 "),ie={class:"col-5 col-md-3 col-lg-2"},de=Object(n["createTextVNode"])(" 我要結帳 "),ue=Object(n["createElementVNode"])("i",{class:"bi bi-arrow-right"},null,-1);function be(e,t,c,k,B,L){var ne,oe,be=Object(n["resolveComponent"])("RouterLink");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[a,Object(n["createElementVNode"])("main",l,[Object(n["createElementVNode"])("div",r,[s,null!==(ne=L.cartData)&&void 0!==ne&&null!==(oe=ne.carts)&&void 0!==oe&&oe.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,[Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger me-md-3",onClick:t[0]||(t[0]=function(){return L.clearCart&&L.clearCart.apply(L,arguments)})},"清空購物車")]),Object(n["createElementVNode"])("div",f,[g,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(L.cartData.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",{class:"row gx-md-5 align-items-center list-unstyled border-bottom pb-3",key:e.id},[Object(n["createElementVNode"])("li",j,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("img",{class:"img-cover",src:e.product.imageUrl,alt:e.product.title},null,8,x)])]),Object(n["createElementVNode"])("li",v,[Object(n["createElementVNode"])("ul",h,[Object(n["createElementVNode"])("li",E,[Object(n["createElementVNode"])("h4",N,Object(n["toDisplayString"])(e.product.title),1)]),Object(n["createElementVNode"])("li",y,[B.isBtnLoading&&B.itemId===e.product_id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",V,C)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",w,[Object(n["createElementVNode"])("button",{class:"btn btn-custom",type:"button",disabled:e.qty<=1,onClick:function(t){return L.updateCart("decrement",e)}},D,8,R),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control text-end",type:"number",min:"1","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return L.updateCart("update",e)}},null,40,I),[[n["vModelText"],e.qty,void 0,{number:!0}]]),Object(n["createElementVNode"])("button",{class:"btn btn-custom",type:"button",onClick:function(t){return L.updateCart("increment",e)}},T,8,S)]))]),Object(n["createElementVNode"])("li",_," NTD "+Object(n["toDisplayString"])(e.total.toLocaleString()),1)])]),Object(n["createElementVNode"])("li",$,[L.checkBtnLoading("cart-delCart-".concat(e.id))?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",q)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,type:"button",class:"btn-close",onClick:function(t){return L.delProduct(e.id)}},null,8,A))])])})),128))]),Object(n["createElementVNode"])("ul",P,[Object(n["createElementVNode"])("li",U,[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(B.couponRes.className)},Object(n["toDisplayString"])(B.couponRes.msg),3),Object(n["createElementVNode"])("div",M,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券號碼","onUpdate:modelValue":t[1]||(t[1]=function(e){return B.couponCode=e})},null,512),[[n["vModelText"],B.couponCode]]),Object(n["createElementVNode"])("button",{class:"btn btn-outline-success",type:"button",disabled:!B.couponCode||B.isBtnLoading&&"coupon"===B.itemId,onClick:t[2]||(t[2]=function(){return L.matchCoupon&&L.matchCoupon.apply(L,arguments)})},[B.isBtnLoading&&"coupon"===B.itemId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",K)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",z,"使用"))],8,F)])]),Object(n["createElementVNode"])("li",J,[Y,Object(n["createElementVNode"])("p",null,"NTD "+Object(n["toDisplayString"])(L.cartData.total.toLocaleString()),1)]),Object(n["createElementVNode"])("li",G,[H,Object(n["createElementVNode"])("p",null,"NTD "+Object(n["toDisplayString"])(B.deliveryFee),1)]),Object(n["createElementVNode"])("li",Q,[W,Object(n["createElementVNode"])("p",null,"NTD "+Object(n["toDisplayString"])(L.discountAmount),1)]),Object(n["createElementVNode"])("li",X,[Z,Object(n["createElementVNode"])("p",null,"NTD "+Object(n["toDisplayString"])(L.finalTotal),1)])]),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("div",te,[Object(n["withDirectives"])(Object(n["createElementVNode"])("p",ce,ae,512),[[n["vShow"],L.cartData.total<300]])]),Object(n["createElementVNode"])("div",le,[Object(n["createVNode"])(be,{to:{path:"/products",query:{category:"全部"}},class:"btn btn-outline-secondary w-100"},{default:Object(n["withCtx"])((function(){return[re,se]})),_:1})]),Object(n["createElementVNode"])("div",ie,[Object(n["createVNode"])(be,{to:"/order/info",class:Object(n["normalizeClass"])(["btn btn-primary link-hover w-100",L.cartData.total>=300?"":"disabled"])},{default:Object(n["withCtx"])((function(){return[de,ue]})),_:1},8,["class"])])])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[d,Object(n["createVNode"])(be,{to:{path:"/products",query:{category:"全部"}},class:"btn btn-primary btn-lg mb-5"},{default:Object(n["withCtx"])((function(){return[u,b]})),_:1})]))])])])}c("ac1f"),c("466d"),c("d3b7"),c("25f0"),c("99af");var me={data:function(){return{deliveryFee:30,couponCode:"",itemId:"",isBtnLoading:!1,couponRes:{isErr:!1,msg:"",className:{"text-danger":!1,"text-success":!1}}}},inject:["checkBtnLoading"],computed:{cartData:function(){return this.$store.state.cartList},finalTotal:function(){var e=this.cartData.final_total;return e+=this.deliveryFee,Math.ceil(e).toLocaleString()},discountAmount:function(){var e=this.cartData.total,t=this.cartData.final_total;return t=Math.ceil(t),t=e-t,t.toLocaleString()}},watch:{cartData:{handler:function(){this.checkCoupon()},deep:!0}},methods:{updateCart:function(e,t){var c=t.qty.toString().match(/\d$/);if(t.qty>0&&c){var n={product_id:t.product_id,qty:t.qty};switch(e){case"increment":n.qty+=1;break;case"decrement":n.qty-=1;break;default:break}this.$store.commit("addBtnLoadingItem","cart-updateCart-".concat(t.product_id)),this.$store.dispatch("putCart",{data:n,id:t.id,prefix:"cart-updateCart"})}},delProduct:function(e){var t={id:e,prefix:"cart-delCart"};this.$store.commit("addBtnLoadingItem","".concat(t.prefix,"-").concat(e)),this.$store.dispatch("delCart",t)},clearCart:function(){this.$store.commit("toggleLoading",!0),this.$store.dispatch("clearCart")},matchCoupon:function(){var e=this,t={code:this.couponCode};this.itemId="coupon",this.isBtnLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("calon","/coupon");this.$http.post(c,{data:t}).then((function(t){var c=t.data,n=c.success,o=c.message;e.couponRes.msg=o,e.couponRes.isErr=!n,e.couponRes.className["text-danger"]=!n,e.couponRes.className["text-success"]=n,e.isBtnLoading=!1,localStorage.removeItem("coupon"),e.$store.dispatch("fetchCartList")})).catch((function(t){var c=t.response.data.success;e.isBtnLoading=!1,e.couponRes.isErr=c,e.couponRes.className["text-danger"]=!c,e.couponRes.className["text-success"]=c,e.couponRes.msg=t.response.data.message})).then((function(){e.couponCode=""}))},checkCoupon:function(){var e,t=null===(e=this.cartData)||void 0===e?void 0:e.carts;if(t){var c,n,o=null===(c=this.cartData)||void 0===c||null===(n=c.carts[0])||void 0===n?void 0:n.coupon;if(o){var a=this.cartData.carts[0].coupon;this.couponRes.msg="已套用優惠券:".concat(a.code),this.couponRes.isErr=!1,this.couponRes.className["text-danger"]=!1,this.couponRes.className["text-success"]=!0}}},getCoupon:function(){var e=localStorage.getItem("coupon");e&&(this.couponCode=e)}},created:function(){this.getCoupon(),this.checkCoupon()}},pe=c("d959"),fe=c.n(pe);const ge=fe()(me,[["render",be]]);t["default"]=ge},"8aa5":function(e,t,c){"use strict";var n=c("6547").charAt;e.exports=function(e,t,c){return t+(c?n(e,t).length:1)}},9263:function(e,t,c){"use strict";var n=c("c65b"),o=c("e330"),a=c("577e"),l=c("ad6d"),r=c("9f7f"),s=c("5692"),i=c("7c73"),d=c("69f3").get,u=c("fce3"),b=c("107c"),m=s("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,f=p,g=o("".charAt),j=o("".indexOf),O=o("".replace),x=o("".slice),v=function(){var e=/a/,t=/b*/g;return n(p,e,"a"),n(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),h=r.BROKEN_CARET,E=void 0!==/()??/.exec("")[1],N=v||E||h||u||b;N&&(f=function(e){var t,c,o,r,s,u,b,N=this,y=d(N),V=a(e),k=y.raw;if(k)return k.lastIndex=N.lastIndex,t=n(f,k,V),N.lastIndex=k.lastIndex,t;var C=y.groups,w=h&&N.sticky,R=n(l,N),B=N.source,D=0,I=V;if(w&&(R=O(R,"y",""),-1===j(R,"g")&&(R+="g"),I=x(V,N.lastIndex),N.lastIndex>0&&(!N.multiline||N.multiline&&"\n"!==g(V,N.lastIndex-1))&&(B="(?: "+B+")",I=" "+I,D++),c=new RegExp("^(?:"+B+")",R)),E&&(c=new RegExp("^"+B+"$(?!\\s)",R)),v&&(o=N.lastIndex),r=n(p,w?c:N,I),w?r?(r.input=x(r.input,D),r[0]=x(r[0],D),r.index=N.lastIndex,N.lastIndex+=r[0].length):N.lastIndex=0:v&&r&&(N.lastIndex=N.global?r.index+r[0].length:o),E&&r&&r.length>1&&n(m,r[0],c,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&C)for(r.groups=u=i(null),s=0;s<C.length;s++)b=C[s],u[b[0]]=r[b[1]];return r}),e.exports=f},"9f7f":function(e,t,c){var n=c("d039"),o=c("da84"),a=o.RegExp,l=n((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),r=l||n((function(){return!a("a","y").sticky})),s=l||n((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:r,UNSUPPORTED_Y:l}},ac1f:function(e,t,c){"use strict";var n=c("23e7"),o=c("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(e,t,c){"use strict";var n=c("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,c){"use strict";c("ac1f");var n=c("e330"),o=c("6eeb"),a=c("9263"),l=c("d039"),r=c("b622"),s=c("9112"),i=r("species"),d=RegExp.prototype;e.exports=function(e,t,c,u){var b=r(e),m=!l((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),p=m&&!l((function(){var t=!1,c=/a/;return"split"===e&&(c={},c.constructor={},c.constructor[i]=function(){return c},c.flags="",c[b]=/./[b]),c.exec=function(){return t=!0,null},c[b](""),!t}));if(!m||!p||c){var f=n(/./[b]),g=t(b,""[e],(function(e,t,c,o,l){var r=n(e),s=t.exec;return s===a||s===d.exec?m&&!l?{done:!0,value:f(t,c,o)}:{done:!0,value:r(c,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(d,b,g[1])}u&&s(d[b],"sham",!0)}},fce3:function(e,t,c){var n=c("d039"),o=c("da84"),a=o.RegExp;e.exports=n((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-53d8bff0.e5d2f264.js.map