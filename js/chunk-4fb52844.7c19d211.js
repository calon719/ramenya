(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb52844"],{"057f":function(e,t,a){var o=a("c6b6"),c=a("fc6a"),n=a("241c").f,l=a("4dae"),r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(e){try{return n(e)}catch(t){return l(r)}};e.exports.f=function(e){return r&&"Window"==o(e)?i(e):n(c(e))}},"2a53":function(e,t,a){"use strict";a("99af");var o=a("7a23"),c={class:"d-flex justify-content-center","aria-label":"Page navigation"},n={class:"pagination"},l=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),r=[l],i=["onClick"],s=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),d=[s];function m(e,t,a,l,s,m){var u,b,p;return Object(o["openBlock"])(),Object(o["createElementBlock"])("nav",c,[Object(o["createElementVNode"])("ul",n,[Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!(null!==(u=a.pages)&&void 0!==u&&u.has_pre)}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return m.changePrePage(a.pages.current_page-1)}),["prevent"]))},r)],2),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(null===(b=a.pages)||void 0===b?void 0:b.total_pages,(function(e){var t;return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["page-item",{active:a.pages.current_page===e}]),key:"".concat(e,"_").concat(null===(t=a.pages)||void 0===t?void 0:t.total_pages)},[Object(o["createElementVNode"])("a",{class:Object(o["normalizeClass"])(["page-link",{"cursor-default":a.pages.current_page===e}]),href:"#",onClick:Object(o["withModifiers"])((function(t){return m.changePage(e)}),["prevent"])},Object(o["toDisplayString"])(e),11,i)],2)})),128)),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!(null!==(p=a.pages)&&void 0!==p&&p.has_next)}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return m.changeNextPage(a.pages.current_page+1)}),["prevent"]))},d)],2)])])}var u={props:["pages"],emits:["page"],methods:{changePage:function(e){this.pages.current_page!==e&&this.$emit("page",e)},changePrePage:function(e){this.pages.has_pre&&this.$emit("page",e)},changeNextPage:function(e){this.pages.has_next&&this.$emit("page",e)}}},b=a("d959"),p=a.n(b);const f=p()(u,[["render",m]]);t["a"]=f},"428f":function(e,t,a){var o=a("da84");e.exports=o},"4dae":function(e,t,a){var o=a("da84"),c=a("23cb"),n=a("07fa"),l=a("8418"),r=o.Array,i=Math.max;e.exports=function(e,t,a){for(var o=n(e),s=c(t,o),d=c(void 0===a?o:a,o),m=r(i(d-s,0)),u=0;s<d;s++,u++)l(m,u,e[s]);return m.length=u,m}},"6ff1":function(e,t,a){"use strict";var o=a("7a23"),c={class:"modal fade",id:"delModal",tabindex:"-1",ref:"modal"},n={class:"modal-dialog"},l={class:"modal-content"},r=Object(o["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(o["createElementVNode"])("h3",{class:"modal-title fw-bold"},"刪除資料"),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},s=Object(o["createElementVNode"])("p",null," 確定要刪除以下資料嗎？ ",-1),d=Object(o["createElementVNode"])("strong",{class:"text-danger"},"※ 注意：刪除後資料無法復原",-1),m={class:"modal-footer"},u=["disabled"],b={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},p={key:1},f=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-secondary px-4","data-bs-dismiss":"modal"},"取消",-1);function h(e,t,a,h,g,O){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",l,[r,Object(o["createElementVNode"])("div",i,[s,Object(o["renderSlot"])(e.$slots,"modal-text"),d]),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger px-4",onClick:t[0]||(t[0]=function(){return O.delData&&O.delData.apply(O,arguments)}),disabled:g.isLoading},[g.isLoading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",b)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,"刪除"))],8,u),f])])])],512)}a("99af");var g=a("e0ae"),O={data:function(){return{modal:{},apiBase:"".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("calon"),data:this.item,isLoading:!1}},inject:["pushToastMessage"],props:["item","view"],watch:{item:{handler:function(e){this.data=e},deep:!0}},mixins:[g["a"]],methods:{delData:function(){var e=this,t="".concat(this.apiBase,"/admin/").concat(this.view,"/").concat(this.data.id),a="";switch(this.view){case"product":a="刪除產品";break;case"coupon":a="刪除優惠券";break;case"order":a="刪除訂單";break;default:break}this.isLoading=!0,this.$http.delete(t).then((function(t){e.pushToastMessage("admin",t.data.success,a),e.hideModal(),e.$emit("update")})).catch((function(t){e.pushToastMessage("admin",t.response.data.success,a)})).then((function(){e.isLoading=!1}))}}},j=a("d959"),v=a.n(j);const V=v()(O,[["render",h]]);t["a"]=V},"746f":function(e,t,a){var o=a("428f"),c=a("1a2d"),n=a("e538"),l=a("9bf2").f;e.exports=function(e){var t=o.Symbol||(o.Symbol={});c(t,e)||l(t,e,{value:n.f(e)})}},9865:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),c={class:"adminProducts"},n=Object(o["createElementVNode"])("h2",null,"產品資料管理列表",-1),l=Object(o["createElementVNode"])("span",{class:"material-icons-outlined"}," add ",-1),r=Object(o["createTextVNode"])(" 新增產品 "),i=[l,r],s={class:"table-responsive"},d={class:"table table-striped text-center text-nowrap"},m=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{scope:"col"},"分類"),Object(o["createElementVNode"])("th",{scope:"col"},"產品圖片"),Object(o["createElementVNode"])("th",{scope:"col"},"產品名稱"),Object(o["createElementVNode"])("th",{scope:"col"},"原價"),Object(o["createElementVNode"])("th",{scope:"col"},"售價"),Object(o["createElementVNode"])("th",{scope:"col"},"產品標籤"),Object(o["createElementVNode"])("th",{scope:"col"},"啟用狀態"),Object(o["createElementVNode"])("th",{scope:"col"})])],-1),u={class:"align-middle"},b=Object(o["createElementVNode"])("td",{colspan:"8",class:"py-5"}," 尚未有任何產品，可以點擊右上角的「新增產品」來新增產品 ",-1),p=[b],f={class:"ratio ratio-4x3 overflow-hidden",style:{width:"120px"}},h=["src"],g={class:"text-end"},O={class:"text-end"},j={class:"d-flex justify-content-center align-items-center"},v={class:"form-check form-switch"},V=["id","onUpdate:modelValue","onChange"],N=["for"],E={class:"btn-group",role:"group","aria-label":"edit product"},y=["onClick"],k=["onClick"],w=Object(o["createTextVNode"])("產品名稱： ");function x(e,t,a,l,r,b){var x=Object(o["resolveComponent"])("PaginationComponent"),B=Object(o["resolveComponent"])("ProductModal"),C=Object(o["resolveComponent"])("DelModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[n,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary px-4 d-flex ms-auto mb-3",onClick:t[0]||(t[0]=function(e){return b.showModal("add")})},i),Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("table",d,[m,Object(o["createElementVNode"])("tbody",u,[Object(o["withDirectives"])(Object(o["createElementVNode"])("tr",null,p,512),[[o["vShow"],!r.productsData.length]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.productsData,(function(e){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.category),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("img",{class:"img-cover",alt:"產品圖片",src:e.imageUrl},null,8,h)])]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.title),1),Object(o["createElementVNode"])("td",g,"NTD "+Object(o["toDisplayString"])(e.origin_price),1),Object(o["createElementVNode"])("td",O,"NTD "+Object(o["toDisplayString"])(e.price),1),Object(o["createElementVNode"])("td",{class:Object(o["normalizeClass"])(r.productTags[e.tag]["className"])},Object(o["toDisplayString"])(r.productTags[e.tag]["text"]),3),Object(o["createElementVNode"])("td",{class:Object(o["normalizeClass"])(e.is_enabled?"text-success":"text-muted")},[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("div",v,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input rounded-pill",type:"checkbox",role:"switch",id:e.id,"onUpdate:modelValue":function(t){return e.is_enabled=t},"true-value":1,"false-value":0,onChange:function(t){return b.changeEnable(e)}},null,40,V),[[o["vModelCheckbox"],e.is_enabled]]),Object(o["createElementVNode"])("label",{class:"form-check-label",for:e.id},Object(o["toDisplayString"])(e.is_enabled?"啟用":"不啟用"),9,N)])])],2),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return b.showModal("edit",e)}},"編輯",8,y),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return b.showModal("delete",e)}},"刪除",8,k)])])])),[[o["vShow"],r.productsData.length]])})),128))])])]),Object(o["createVNode"])(x,{pages:r.paginationData,onPage:b.getProducts},null,8,["pages","onPage"]),Object(o["createVNode"])(B,{ref:"productModalOuter",product:r.modalTemp,status:r.methodStatus,onUpdate:b.getProducts},null,8,["product","status","onUpdate"]),Object(o["createVNode"])(C,{ref:"delModalOuter",item:r.modalTemp,view:"product",onUpdate:b.getProducts},{"modal-text":Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("p",null,[w,Object(o["createElementVNode"])("strong",null,Object(o["toDisplayString"])(r.modalTemp.title),1)])]})),_:1},8,["item","onUpdate"])])}a("99af"),a("e9c4");var B=a("2a53"),C=(a("a434"),a("a4d3"),a("e01a"),{class:"modal fade",id:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),M={class:"modal-dialog modal-xl"},U={class:"modal-content"},S={class:"modal-header bg-dark text-white"},D={class:"modal-title",id:"productModalLabel"},T=Object(o["createElementVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),P={class:"modal-body"},_={class:"row"},$={class:"col-md-4 mb-3 mb-md-0"},L={class:"mb-3"},I=Object(o["createElementVNode"])("small",{class:"text-danger"},"※ 圖片大小不可超過 3 MB",-1),z={class:"mb-2"},F=Object(o["createElementVNode"])("label",{class:"form-label",for:"imgFile"},"產品主要圖片",-1),J={class:"btn-group w-100 mb-1",role:"group","aria-label":"Upload image button group"},q=["value"],A={key:1,class:"d-flex justify-content-center opacity-50 py-2"},Q=Object(o["createElementVNode"])("div",{class:"spinner-border text-dark",role:"status"},[Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),W=[Q],G=["value"],H=["src"],K={class:"mb-2"},R=Object(o["createElementVNode"])("label",{class:"form-label",for:"otherImgFile"},"產品其他圖片",-1),X={class:"btn-group w-100 mb-1",role:"group","aria-label":"Upload image button group"},Y=["value"],Z={key:1,class:"d-flex justify-content-center opacity-50 py-2"},ee=Object(o["createElementVNode"])("div",{class:"spinner-border text-dark",role:"status"},null,-1),te=[ee],ae={key:0,class:"input-group mb-3"},oe=["value"],ce=["onClick"],ne={class:"col-md-8"},le={class:"row"},re={class:"mb-3"},ie=Object(o["createElementVNode"])("label",{class:"form-label",for:"title"},[Object(o["createTextVNode"])(" 產品標題 "),Object(o["createElementVNode"])("span",{class:"text-danger"},"*")],-1),se={class:"col-md-6 mb-3"},de=Object(o["createElementVNode"])("label",{class:"form-label",for:"category"},[Object(o["createTextVNode"])(" 分類 "),Object(o["createElementVNode"])("span",{class:"text-danger"},"*")],-1),me={class:"col-md-6 mb-3"},ue=Object(o["createElementVNode"])("label",{class:"form-label",for:"unit"},[Object(o["createTextVNode"])(" 單位 "),Object(o["createElementVNode"])("span",{class:"text-danger"},"*")],-1),be={class:"col-md-6 mb-3"},pe=Object(o["createElementVNode"])("label",{class:"form-label",for:"originPrice"},[Object(o["createTextVNode"])(" 原價 "),Object(o["createElementVNode"])("span",{class:"text-danger"},"*")],-1),fe={class:"col-md-6 mb-3"},he=Object(o["createElementVNode"])("label",{class:"form-label",for:"price"},[Object(o["createTextVNode"])(" 售價 "),Object(o["createElementVNode"])("span",{class:"text-danger"},"*")],-1),ge=Object(o["createElementVNode"])("hr",null,null,-1),Oe={class:"mb-3"},je=Object(o["createElementVNode"])("label",{class:"form-label",for:"description"},"產品描述",-1),ve={class:"mb-3"},Ve=Object(o["createElementVNode"])("label",{class:"form-label",for:"content"},"內容說明",-1),Ne={class:"mb-3"},Ee=Object(o["createElementVNode"])("label",{class:"form-label",for:"productTag"},"產品標籤",-1),ye=Object(o["createElementVNode"])("option",{disabled:""},"請選擇產品標籤",-1),ke=Object(o["createElementVNode"])("option",{value:"0"},"無",-1),we=Object(o["createElementVNode"])("option",{value:"1"},"人氣精選",-1),xe=Object(o["createElementVNode"])("option",{value:"2"},"新品上市",-1),Be=[ye,ke,we,xe],Ce={class:"d-flex justify-content-end"},Me={class:"form-check me-2"},Ue=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_alcohol"}," 是否為酒精飲品 ",-1),Se={class:"form-check form-switch"},De=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Te={class:"modal-footer"},Pe=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary px-4","data-bs-dismiss":"modal"},"取消",-1),_e=["disabled"],$e={key:0},Le={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function Ie(e,t,a,c,n,l){var r=Object(o["resolveComponent"])("Field"),i=Object(o["resolveComponent"])("ErrorMessage"),s=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,[Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("h3",D,Object(o["toDisplayString"])("add"===a.status?"新增":"編輯")+"產品資料 ",1),T]),Object(o["createVNode"])(s,{ref:"form",onSubmit:l.updateProduct},{default:Object(o["withCtx"])((function(e){var a,c=e.errors,s=e.meta;return[Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",L,[I,Object(o["createElementVNode"])("div",z,[F,Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])(["btn","upload"===n.imgBtn.main?"btn-secondary":"btn-outline-secondary"]),onClick:t[0]||(t[0]=function(e){return n.imgBtn.main="upload"})},"上傳圖片",2),Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])(["btn","url"===n.imgBtn.main?"btn-secondary":"btn-outline-secondary"]),onClick:t[1]||(t[1]=function(e){return n.imgBtn.main="url"})},"輸入網址",2)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[n.isUploading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",A,W)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("input",{key:0,type:"file",class:"form-control",id:"imgFile",placeholder:"請選擇要上傳的圖片檔案",value:n.resetStr,onChange:t[2]||(t[2]=function(e){return l.uploadImg(e,"mainImg")})},null,40,q))],512),[[o["vShow"],"upload"===n.imgBtn.main]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片網址","aria-label":"輸入圖片網址","aria-describedby":"button-addon2","onUpdate:modelValue":t[3]||(t[3]=function(e){return n.item.imageUrl=e})},null,512),[[o["vShow"],"url"===n.imgBtn.main],[o["vModelText"],n.item.imageUrl]])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("input",{type:"text",class:"form-control mb-1","aria-label":"欲上傳產品圖片",value:n.item.imageUrl,readonly:""},null,8,G),Object(o["createElementVNode"])("img",{class:"img-fluid",src:n.item.imageUrl,alt:"產品主圖片"},null,8,H)],512),[[o["vShow"],n.item.imageUrl]])]),Object(o["createElementVNode"])("div",K,[R,Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])(["btn","upload"===n.imgBtn.other?"btn-secondary":"btn-outline-secondary"]),onClick:t[4]||(t[4]=function(e){return n.imgBtn.other="upload"})},"上傳圖片",2),Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])(["btn","url"===n.imgBtn.other?"btn-secondary":"btn-outline-secondary"]),onClick:t[5]||(t[5]=function(e){return n.imgBtn.other="url"})},"輸入網址",2)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[n.isUploading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Z,te)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("input",{key:0,type:"file",class:"form-control",id:"otherImgFile",placeholder:"請選擇要上傳的圖片檔案",value:n.resetStr,onChange:t[6]||(t[6]=function(e){return l.uploadImg(e,"otherImg")})},null,40,Y))],512),[[o["vShow"],"upload"===n.imgBtn.other]]),"url"===n.imgBtn.other?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ae,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片網址","aria-label":"輸入圖片網址","aria-describedby":"otherImgBtn","onUpdate:modelValue":t[7]||(t[7]=function(e){return n.imgUrl=e})},null,512),[[o["vModelText"],n.imgUrl]]),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",id:"otherImgBtn",onClick:t[8]||(t[8]=function(){return l.pushImg&&l.pushImg.apply(l,arguments)})},"新增")])):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.item.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"input-group mb-1",key:e},[Object(o["createElementVNode"])("input",{type:"text",class:"form-control","aria-label":"欲上傳產品圖片","aria-describedby":"button-deleteImgUrl",value:e,readonly:""},null,8,oe),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",id:"button-deleteImgUrl",onClick:function(e){return n.item.imagesUrl.splice(t,1)}},"刪除",8,ce)])})),128))],512),[[o["vShow"],null===(a=n.item.imagesUrl)||void 0===a?void 0:a.length]])]),Object(o["createElementVNode"])("div",ne,[Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",re,[ie,Object(o["createVNode"])(r,{id:"title",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["標題"]}]),type:"text",name:"標題",placeholder:"請輸入產品標題",rules:"required",modelValue:n.item.title,"onUpdate:modelValue":t[9]||(t[9]=function(e){return n.item.title=e})},null,8,["modelValue","class"]),Object(o["createVNode"])(i,{name:"標題",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",se,[de,Object(o["createVNode"])(r,{id:"category",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["分類"]}]),type:"text",name:"分類",placeholder:"請輸入產品分類",rules:"required",modelValue:n.item.category,"onUpdate:modelValue":t[10]||(t[10]=function(e){return n.item.category=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(i,{name:"分類",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",me,[ue,Object(o["createVNode"])(r,{id:"unit",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["單位"]}]),type:"text",placeholder:"請輸入產品的單位",name:"單位",rules:"required",modelValue:n.item.unit,"onUpdate:modelValue":t[11]||(t[11]=function(e){return n.item.unit=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(i,{name:"單位",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",be,[pe,Object(o["createVNode"])(r,{id:"originPrice",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["原價"]}]),type:"number",min:"0",placeholder:"請輸入產品原價",name:"原價",rules:"required|minValue:0",modelValue:n.item.origin_price,"onUpdate:modelValue":t[12]||(t[12]=function(e){return n.item.origin_price=e}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(o["createVNode"])(i,{name:"原價",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",fe,[he,Object(o["createVNode"])(r,{id:"price",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["售價"]}]),type:"number",min:"0",placeholder:"請輸入產品售價",name:"售價",rules:"required|minValue:0",modelValue:n.item.price,"onUpdate:modelValue":t[13]||(t[13]=function(e){return n.item.price=e}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(o["createVNode"])(i,{name:"售價",class:"invalid-feedback"})])]),ge,Object(o["createElementVNode"])("div",Oe,[je,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"description",class:"form-control",type:"text",row:"100",placeholder:"請輸入產品描述","onUpdate:modelValue":t[14]||(t[14]=function(e){return n.item.description=e})},null,512),[[o["vModelText"],n.item.description]])]),Object(o["createElementVNode"])("div",ve,[Ve,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{id:"content",class:"form-control",type:"text",row:"100",placeholder:"請輸入產品內容說明","onUpdate:modelValue":t[15]||(t[15]=function(e){return n.item.content=e})},null,512),[[o["vModelText"],n.item.content]])]),Object(o["createElementVNode"])("div",Ne,[Ee,Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{class:"form-select",id:"productTag","aria-label":"Product Tag","onUpdate:modelValue":t[16]||(t[16]=function(e){return n.item.tag=e})},Be,512),[[o["vModelSelect"],n.item.tag]])]),Object(o["createElementVNode"])("div",Ce,[Object(o["createElementVNode"])("div",Me,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"is_alcohol","onUpdate:modelValue":t[17]||(t[17]=function(e){return n.item.is_alcohol=e})},null,512),[[o["vModelCheckbox"],n.item.is_alcohol]]),Ue]),Object(o["createElementVNode"])("div",Se,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"checkbox",role:"switch",id:"is_enabled",class:"form-check-input rounded-pill","true-value":1,"false-value":0,"onUpdate:modelValue":t[18]||(t[18]=function(e){return n.item.is_enabled=e})},null,512),[[o["vModelCheckbox"],n.item.is_enabled]]),De])])])])]),Object(o["createElementVNode"])("div",Te,[Pe,Object(o["createElementVNode"])("button",{type:"submit",class:"btn btn-primary px-4",disabled:n.isBtnLoading||!s.valid},[n.isBtnLoading?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Le)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",$e,"確認"))],8,_e)])]})),_:1},8,["onSubmit"])])])],512)}var ze=a("e0ae"),Fe={data:function(){return{modal:{},apiBase:"".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("calon"),item:this.product,imgBtn:{main:"url",other:"url"},imgUrl:"",resetStr:"",isUploading:!1,isBtnLoading:!1}},props:["product","status"],watch:{product:function(){this.item=this.product}},mixins:[ze["a"]],inject:["pushToastMessage"],methods:{uploadImg:function(e,t){var a=this,o=e.target.files[0],c=new FormData;c.append("file-to-upload",o);var n="".concat(this.apiBase,"/admin/upload");this.isUploading=!0,this.$http.post(n,c).then((function(e){a.pushToastMessage("admin",e.data.success,"圖片上傳");var o=e.data.imageUrl;if(e.data.success)switch(t){case"mainImg":a.item.imageUrl=o;break;case"otherImg":a.item.imagesUrl||(a.item.imagesUrl=[]),a.item.imagesUrl.push(o);break;default:break}})).catch((function(e){var t;a.pushToastMessage("admin",null===(t=e.data)||void 0===t?void 0:t.success,"圖片上傳"),console.dir(e)})).then((function(){a.isUploading=!1,a.resetStr=""}))},pushImg:function(){""!==this.imgUrl&&(this.item.imagesUrl||(this.item.imagesUrl=[]),this.item.imagesUrl.push(this.imgUrl))},updateProduct:function(){var e=this,t="",a="".concat(this.apiBase,"/admin/product");switch(this.item.tag=parseInt(this.item.tag,10),this.status){case"add":t="post";break;case"edit":t="put",a="".concat(this.apiBase,"/admin/product/").concat(this.item.id);break;default:break}this.isBtnLoading=!0,this.$http[t](a,{data:this.item}).then((function(t){e.modal.hide(),e.pushToastMessage("admin",t.data.success,"產品更新"),e.$emit("update"),e.$refs.form.resetForm()})).catch((function(t){console.dir(t),e.pushToastMessage("admin",t.response.data.success,"產品更新")})).then((function(){e.isBtnLoading=!1}))}}},Je=a("d959"),qe=a.n(Je);const Ae=qe()(Fe,[["render",Ie]]);var Qe=Ae,We=a("6ff1"),Ge={data:function(){return{apiBase:"".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("calon"),productsData:[],paginationData:{},modalTemp:{imagesUrl:[],tag:0,is_enabled:0,is_alcohol:!1},isEnableChanged:{},methodStatus:"",productTags:{0:{text:"無",className:"text-muted"},1:{text:"人氣精選",className:"text-danger"},2:{text:"新品上市",className:"text-success"}}}},inject:["pushToastMessage","showErrMsg"],methods:{getProducts:function(){var e,t,a=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null!==(e=null===(t=this.paginationData)||void 0===t?void 0:t.current_page)&&void 0!==e?e:1,c="".concat(this.apiBase,"/admin/products?page=").concat(o);this.$store.commit("toggleLoading",!0),this.$http.get(c).then((function(e){a.productsData=e.data.products,a.paginationData=e.data.pagination,a.$store.commit("toggleLoading",!1)})).catch((function(e){a.showErrMsg(e.data.response.message),a.$store.commit("toggleLoading",!1)}))},showModal:function(e,t){switch(this.methodStatus=e,e){case"add":this.modalTemp={imagesUrl:[],tag:0,is_enabled:0,is_alcohol:!1},this.$refs.productModalOuter.showModal();break;case"edit":this.modalTemp=JSON.parse(JSON.stringify(t)),this.$refs.productModalOuter.showModal();break;case"delete":this.modalTemp=t,this.$refs.delModalOuter.showModal();break;default:break}},changeEnable:function(e){var t=this,a="".concat(this.apiBase,"/admin/product/").concat(e.id);this.$store.commit("toggleLoading",!0),this.$http.put(a,{data:e}).then((function(e){t.getProducts(),t.pushToastMessage("admin",e.data.success,"產品更新"),t.$store.commit("toggleLoading",!1)})).catch((function(e){t.pushToastMessage("admin",e.response.data.success,"產品更新"),t.$store.commit("toggleLoading",!1)}))}},created:function(){this.getProducts()},components:{PaginationComponent:B["a"],ProductModal:Qe,DelModal:We["a"]}};const He=qe()(Ge,[["render",x]]);t["default"]=He},a4d3:function(e,t,a){"use strict";var o=a("23e7"),c=a("da84"),n=a("d066"),l=a("2ba4"),r=a("c65b"),i=a("e330"),s=a("c430"),d=a("83ab"),m=a("4930"),u=a("d039"),b=a("1a2d"),p=a("e8b5"),f=a("1626"),h=a("861d"),g=a("3a9b"),O=a("d9b5"),j=a("825a"),v=a("7b0b"),V=a("fc6a"),N=a("a04b"),E=a("577e"),y=a("5c6c"),k=a("7c73"),w=a("df75"),x=a("241c"),B=a("057f"),C=a("7418"),M=a("06cf"),U=a("9bf2"),S=a("37e8"),D=a("d1e7"),T=a("f36a"),P=a("6eeb"),_=a("5692"),$=a("f772"),L=a("d012"),I=a("90e3"),z=a("b622"),F=a("e538"),J=a("746f"),q=a("d44e"),A=a("69f3"),Q=a("b727").forEach,W=$("hidden"),G="Symbol",H="prototype",K=z("toPrimitive"),R=A.set,X=A.getterFor(G),Y=Object[H],Z=c.Symbol,ee=Z&&Z[H],te=c.TypeError,ae=c.QObject,oe=n("JSON","stringify"),ce=M.f,ne=U.f,le=B.f,re=D.f,ie=i([].push),se=_("symbols"),de=_("op-symbols"),me=_("string-to-symbol-registry"),ue=_("symbol-to-string-registry"),be=_("wks"),pe=!ae||!ae[H]||!ae[H].findChild,fe=d&&u((function(){return 7!=k(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a}))?function(e,t,a){var o=ce(Y,t);o&&delete Y[t],ne(e,t,a),o&&e!==Y&&ne(Y,t,o)}:ne,he=function(e,t){var a=se[e]=k(ee);return R(a,{type:G,tag:e,description:t}),d||(a.description=t),a},ge=function(e,t,a){e===Y&&ge(de,t,a),j(e);var o=N(t);return j(a),b(se,o)?(a.enumerable?(b(e,W)&&e[W][o]&&(e[W][o]=!1),a=k(a,{enumerable:y(0,!1)})):(b(e,W)||ne(e,W,y(1,{})),e[W][o]=!0),fe(e,o,a)):ne(e,o,a)},Oe=function(e,t){j(e);var a=V(t),o=w(a).concat(Ee(a));return Q(o,(function(t){d&&!r(ve,a,t)||ge(e,t,a[t])})),e},je=function(e,t){return void 0===t?k(e):Oe(k(e),t)},ve=function(e){var t=N(e),a=r(re,this,t);return!(this===Y&&b(se,t)&&!b(de,t))&&(!(a||!b(this,t)||!b(se,t)||b(this,W)&&this[W][t])||a)},Ve=function(e,t){var a=V(e),o=N(t);if(a!==Y||!b(se,o)||b(de,o)){var c=ce(a,o);return!c||!b(se,o)||b(a,W)&&a[W][o]||(c.enumerable=!0),c}},Ne=function(e){var t=le(V(e)),a=[];return Q(t,(function(e){b(se,e)||b(L,e)||ie(a,e)})),a},Ee=function(e){var t=e===Y,a=le(t?de:V(e)),o=[];return Q(a,(function(e){!b(se,e)||t&&!b(Y,e)||ie(o,se[e])})),o};if(m||(Z=function(){if(g(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,t=I(e),a=function(e){this===Y&&r(a,de,e),b(this,W)&&b(this[W],t)&&(this[W][t]=!1),fe(this,t,y(1,e))};return d&&pe&&fe(Y,t,{configurable:!0,set:a}),he(t,e)},ee=Z[H],P(ee,"toString",(function(){return X(this).tag})),P(Z,"withoutSetter",(function(e){return he(I(e),e)})),D.f=ve,U.f=ge,S.f=Oe,M.f=Ve,x.f=B.f=Ne,C.f=Ee,F.f=function(e){return he(z(e),e)},d&&(ne(ee,"description",{configurable:!0,get:function(){return X(this).description}}),s||P(Y,"propertyIsEnumerable",ve,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:Z}),Q(w(be),(function(e){J(e)})),o({target:G,stat:!0,forced:!m},{for:function(e){var t=E(e);if(b(me,t))return me[t];var a=Z(t);return me[t]=a,ue[a]=t,a},keyFor:function(e){if(!O(e))throw te(e+" is not a symbol");if(b(ue,e))return ue[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),o({target:"Object",stat:!0,forced:!m,sham:!d},{create:je,defineProperty:ge,defineProperties:Oe,getOwnPropertyDescriptor:Ve}),o({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:Ne,getOwnPropertySymbols:Ee}),o({target:"Object",stat:!0,forced:u((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(v(e))}}),oe){var ye=!m||u((function(){var e=Z();return"[null]"!=oe([e])||"{}"!=oe({a:e})||"{}"!=oe(Object(e))}));o({target:"JSON",stat:!0,forced:ye},{stringify:function(e,t,a){var o=T(arguments),c=t;if((h(t)||void 0!==e)&&!O(e))return p(t)||(t=function(e,t){if(f(c)&&(t=r(c,this,e,t)),!O(t))return t}),o[1]=t,l(oe,null,o)}})}if(!ee[K]){var ke=ee.valueOf;P(ee,K,(function(e){return r(ke,this)}))}q(Z,G),L[W]=!0},e01a:function(e,t,a){"use strict";var o=a("23e7"),c=a("83ab"),n=a("da84"),l=a("e330"),r=a("1a2d"),i=a("1626"),s=a("3a9b"),d=a("577e"),m=a("9bf2").f,u=a("e893"),b=n.Symbol,p=b&&b.prototype;if(c&&i(b)&&(!("description"in p)||void 0!==b().description)){var f={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=s(p,this)?new b(e):void 0===e?b():b(e);return""===e&&(f[t]=!0),t};u(h,b),h.prototype=p,p.constructor=h;var g="Symbol(test)"==String(b("test")),O=l(p.toString),j=l(p.valueOf),v=/^Symbol\((.*)\)[^)]+$/,V=l("".replace),N=l("".slice);m(p,"description",{configurable:!0,get:function(){var e=j(this),t=O(e);if(r(f,e))return"";var a=g?N(t,7,-1):V(t,v,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:h})}},e0ae:function(e,t,a){"use strict";var o=a("7b17");t["a"]={data:function(){return{modal:{}}},methods:{showModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new o["b"](this.$refs.modal)}}},e538:function(e,t,a){var o=a("b622");t.f=o}}]);
//# sourceMappingURL=chunk-4fb52844.7c19d211.js.map